
<!-- saved from url=(0071)https://www.clear.rice.edu/elec301/Projects01/beat_sync/phasealign.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Beat This &gt; Phase Alignment Algorithm</title>

<meta http-equiv="charset" content="iso-8859-1">



</head>

<body bgcolor="#FFFFFF" text="#000000" link="#333333" alink="#333333" vlink="#333333" marginheight="0" topmargin="0">
<font face="Verdana, Arial, Helvetica, sans-serif">
<table cellpadding="0" cellspacing="0" border="0" width="100%" align="center">

  <tbody><tr> 

    <td bgcolor="#003399" align="right" width="1233"> 

      <table cellpadding="4" cellspacing="0" border="0" width="100%" align="right">
        <tbody><tr> 
          <td bgcolor="#003399" align="center"> 
            <p><font color="white" size="+2" face="Verdana, Arial, Helvetica, sans-serif"><b><font size="+3">Beat 
              This</font></b></font></p>
            <font face="Verdana, Arial, Helvetica, sans-serif" helvetica,="helvetica," arial="arial" color="orange" size="+1"> 
            <b><font size="+2">A Beat Synchronization Project</font></b></font> 
          </td>
        </tr>
      </tbody></table>

    </td>

  </tr>

</tbody></table>

<table cellpadding="0" cellspacing="0" border="0" width="100%" align="center">

  <tbody><tr> 

    <td bgcolor="#E8E8D0" colspan="2"> 

      <table cellpadding="0" cellspacing="0" border="0" width="100%" align="center">
        <tbody><tr> 
          <td><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="1" height="6" border="0" alt=""></td>
        </tr>
     
          <tr> 
            <td align="center" valign="middle"><b><a href="http://www.owlnet.rice.edu/~kileen"><font face="Verdana, Arial, Helvetica, sans-serif">Kileen 
              Cheng</font></a></b></td>
            <td align="center" valign="middle"><b><a href="http://www.owlnet.rice.edu/~bobak"><font face="Verdana, Arial, Helvetica, sans-serif">Bobak 
              Nazer</font></a></b></td>
            <td align="center" valign="middle"><b><a href="http://www.owlnet.rice.edu/~juppu"><font face="Verdana, Arial, Helvetica, sans-serif">Jyoti 
              Uppuluri </font></a></b></td>
            <td align="center" valign="middle"><b><a href="http://www.owlnet.rice.edu/~rpverret"><font face="Verdana, Arial, Helvetica, sans-serif">Ryan 
              Verret</font></a></b></td>
          </tr>
        <tr> </tr>
        <tr> 
          <td height="13"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="1" height="6" border="0" alt=""></td>
        </tr>
      </tbody></table>

    </td>

  </tr>

</tbody></table>

<table border="0" bgcolor="#FFFFFF" cellpadding="0" cellspacing="0" width="100%">

  <tbody><tr> 

    <!-- left begin -->

    <td valign="top" bgcolor="#003399" width="148"> 

      <table cellspacing="0" cellpadding="0" border="0">

        <tbody><tr align="center"> 

          <td colspan="2">&nbsp;</td>

        </tr>

        <tr> 

          <td align="center" bgcolor="#0066cb" colspan="2"> 

            <table cellpadding="0" cellspacing="0" border="0" width="144" align="center" bgcolor="#0066cb">
              <tbody><tr bgcolor="#EEEEEE"> 
                <td width="14" height="18"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td valign="middle" width="130"><font face="verdana,
                arial" size="1" color="#000000">
		<a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/index.html"><b>HOME</b></a></font></td>
              </tr>
              <tr> 
                <td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="1" alt=""></td>
              </tr>
              <!-- Section Links -->
            
              <tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/background.html"><font face="verdana,arial" size="2" color="#000000"><b>Background</b></font></a></p>
                  <p><br>
                  </p>
                </td>
              </tr>
              <tr> 
                <td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr>
              <!-- Section Links -->
              <tr bgcolor="#ffffff"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><font face="verdana, arial" size="2"><b><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html">Beat Detection Algorithm</a></b></font><br>
                    <br>
                    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#filterbank">Frequency Filterbank</a></font><br>
                    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#smoothing">Smoothing</a></font><br>
                    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#diff-rect">Diff-Rect</a></font><br>
                    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#comb">Comb
                    Filter</a></font><br>
		     <br>
		    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#block">Block Diagram</a></font><br>
		     <br>
		    <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#code">Matlab Code</a></font><br>
		     <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/beatalgo.html#plots">Matlab Plots</a></font><br>
		    
                    <br>
                    <br>
                  </p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/timescale.html"><font face="verdana,arial" size="2" color="#000000"><b>Time Scaling
              Algorithm</b></font></a><br>
	      <br>
		  <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/timescale.html#code">Matlab Code</a></font><br>
	      
                  </p>
                  <p>&nbsp; </p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/phasealign.html"><font face="verdana,arial" size="2" color="#000000"><b>Phase Alignment
              Algorithm</b></font></a><br>
	       <br>
		  <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/phasealign.html#code">Matlab Code</a></font><br>
		     <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/phasealign.html#plots">Matlab Plots</a></font><br>

                  </p>
                  <p>&nbsp; </p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/results.html"><font face="verdana,arial" size="2" color="#000000"><b>Results</b></font></a><br>
	       <br>
		  <font face="verdana, arial" size="1"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/results.html#music">Music Samples</a></font><br>	
                  </p>
                  <p>&nbsp; </p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/conclusions.html"><font face="verdana,arial" size="2" color="#000000"><b>Conclusions</b></font></a><br>
                  </p>
                  <p>&nbsp; </p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/references.html"><font face="verdana,arial" size="2" color="#000000"><b>References</b></font></a><br>
                  </p><p>&nbsp; </p>
                  <p></p>
                </td>
              </tr>
              <tr><td bgcolor="#999999" colspan="2"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="134" height="8" alt=""></td>
              </tr><tr bgcolor="#FFFFFF"> 
                <td valign="top" width="14"><img src="./Beat This _ Phase Alignment Algorithm_files/arrow.gif" border="0" width="12" height="12" alt=""></td>
                <td width="130"> 
                  <p><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/about.html"><font face="verdana,arial" size="2" color="#000000"><b>About 
                    The Gang </b></font></a>
                  </p><p>&nbsp; </p>
		   <hr>You Are Visitor
		  <a href="http://www.cgi2you.com/"><img src="./Beat This _ Phase Alignment Algorithm_files/counter.php" border="0"></a>
                 
                </td>
              </tr>
            </tbody></table>

          </td>

        </tr>

        <tr> 

          <td colspan="2"> <img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="1" height="10" border="0" alt=""></td>

        </tr>

        <tr> 

          <td colspan="2" align="center" height="2"> </td>

        </tr>

      </tbody></table>

    </td>

    <!-- left end -->

    <!-- centerwell template: media/new_front_page.html -->

    <!--begin center well-->

    <td bgcolor="#ffffff" valign="top"> 

      <table bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" width="100%">

        <tbody><tr> 

          <td bgcolor="#003399" valign="middle" colspan="4"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="5" height="3" border="0" alt=""></td>

        </tr>

        <tr> 

          <td bgcolor="#0066cc" align="left" colspan="4" height="4"><img src="./Beat This _ Phase Alignment Algorithm_files/ppl_generic.gif" width="3" border="0" alt=""></td>

        </tr>

        <tr> 

          <td bgcolor="#FFFFFF" valign="top" align="left"><img src="./Beat This _ Phase Alignment Algorithm_files/cpl_generic.gif" width="3" height="3" border="0" alt=""></td>

          <td bgcolor="#FFFFFF" valign="top" align="justified" width="100%">
            <p>&nbsp; <u><b>Phase Alignment Algorithm</b></u></p>
	    <p>In order for our music to have good sound quality, there is one last step to 
              our algorithm. As it is now, if our signals were added together, 
              their beats would not necessarily occur at the same time even though 
              their tempos are the same. To fix this problem, we need 
              to align the songs beats such that they occurr simultaneously. This phase 
              alignment process is simply an extension of the beat matching algorithm. 
            </p>
            <p>We begin by running one of our signals through all the steps of 
              the beat-matching algorithm prior to the comb filtering. This gives 
              a signal with strong peaks where the beats occur. Since we know 
              the frequency at which these beats occur, we know which comb filter 
              corresponds to this tempo. This comb filter is then convolved with 
              the signal for one period. This is implemented by multiplication 
              of the FFT's of the comb filter and the modified signal. We take 
              the energy of this output and find the location in time of the maximum 
              energy value. </p>
            <p>This process is repeated for the other signal, resulting in two 
              locations in time -- where the first beat occurs in each signal. The 
              signal whose beat occurs first is simply zero-padded until the two 
              beats occur simultaneously. Now the two songs are phase-aligned. 
            </p>
	       <br><br><hr><br>

	    <a name="code"></a>
            <p>&nbsp; <u><b>Matlab Code</b></u></p>
	    <ul>
	    <li><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/code/phasealign.m" target="_blank"><b><font color="blue">phasealign.m</font></b></a> - takes a time domain signal and returns the location of
% the sample where its first beat occurs. </li>
	    </ul><br>

	     <a name="plots"></a>
            <p>&nbsp; <u><b>Matlab Plots</b></u></p>
	    <center>
	     <b>&nbsp; &nbsp; Before Phase Alignment:  </b><br>
	     <a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/images/plot5.gif"><img src="./Beat This _ Phase Alignment Algorithm_files/plot5_small.gif"></a><br><br><br>

	      <b>&nbsp; &nbsp; After Phase Alignment:  </b><br>
	     <a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/images/plot6.gif"><img src="./Beat This _ Phase Alignment Algorithm_files/plot6_small.gif"></a><br><br>
	    </center>

            </td>

        </tr>
		

      </tbody></table>
   
    </td>

    <!--end center well-->

  </tr>

</tbody></table>

<table cellpadding="0" cellspacing="0" border="0" width="100%" align="center">

  <tbody><tr> 

    <td bgcolor="#003399" align="left"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="1" height="10" border="0" alt=""></td>

  </tr>

  <tr> 

    <td bgcolor="#003399" align="center"> 

      <p>&nbsp;</p>

      <p>&nbsp;</p>

    </td>

  </tr>

  <tr> 

    <td bgcolor="#003399" align="left"><a href="https://www.clear.rice.edu/elec301/Projects01/beat_sync/phasealign.html#"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" width="1" height="10" border="0" alt=""></a></td>

  </tr>

  <tr> 

    <td align="center"><img src="./Beat This _ Phase Alignment Algorithm_files/t.gif" border="0" width="1" height="4" alt=""><br>

      <font face="verdana,arial" size="1" color="#999999"> (C) 2001

    Beat This. 

      All rights reserved.</font></td>

  </tr>

</tbody></table>

<br>


</font>


 </body></html>